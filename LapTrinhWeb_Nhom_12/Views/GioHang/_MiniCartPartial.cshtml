@model List<LapTrinhWeb_Nhom_12.Models.CartItem>

<div class="mini-cart-content">
    <div class="p-3 border-bottom">
        <h6 class="m-0 fw-bold text-primary">Giỏ hàng (@(Model?.Sum(x => x.SoLuong) ?? 0))</h6>
    </div>

    @if (Model != null && Model.Any())
    {
        <div class="mini-cart-items custom-scrollbar" style="max-height: 300px; overflow-y: auto;">
            @foreach (var item in Model)
            {
                <div class="d-flex align-items-center p-3 border-bottom position-relative hover-bg-light">
                    <img src="~/Images/AnhThuoc/@item.AnhThuoc" alt="@item.TenThuoc"
                         class="rounded border" style="width: 50px; height: 50px; object-fit: contain;">

                    <div class="ms-3 flex-grow-1 pe-3">
                        <h6 class="mb-0 text-truncate fw-bold" style="max-width: 180px; font-size: 14px;">
                            <a href="@Url.Action("ChiTiet", "TrangChu", new { id = item.IdThuoc })" class="text-decoration-none text-dark">
                                @item.TenThuoc
                            </a>
                        </h6>
                        <div class="d-flex align-items-center mt-1">
                            <span class="text-primary fw-bold small">@item.DonGia.ToString("N0")đ</span>
                            <span class="text-muted mx-1 small">x</span>
                            <span class="text-muted small">@item.SoLuong @item.DonViTinh</span>
                        </div>
                    </div>

                    <button onclick="removeFromMiniCart(@item.IdThuoc)" class="btn btn-link text-muted p-0" title="Xóa">
                        <i class="bi bi-trash"></i>
                    </button>
                </div>
            }
        </div>

        <div class="p-3 bg-light">
            <div class="d-flex justify-content-between mb-2 small">
                <span>Tổng cộng:</span>
                <span class="fw-bold text-danger">@Model.Sum(x => x.ThanhTien).ToString("N0") đ</span>
            </div>
            <a href="@Url.Action("XemGioHang", "GioHang")" class="btn btn-primary w-100 fw-bold rounded-pill">
                Xem giỏ hàng
            </a>
        </div>
    }
    else
    {
        <div class="text-center py-4">
            <i class="bi bi-cart-x fs-1 text-muted opacity-50"></i>
            <p class="text-muted mt-2 small">Giỏ hàng trống</p>
        </div>
    }
</div>
